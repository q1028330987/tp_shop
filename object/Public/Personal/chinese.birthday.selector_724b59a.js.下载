var ChineseBirthdaySelector=function(a){var e={$dayType:$("#dayType"),$year:$("#year"),$month:$("#month"),$day:$("#day"),dayType:"-1",birthday:"1990-01-01"},n=function(a,e,n){this.year=a,this.month=e,this.day=n},t=function(){e.$year.show(),e.$month.show(),e.$day.show()},o=function(){e.$year.hide(),e.$month.hide(),e.$day.hide()},r=function(a){$.extend(e,a),"-1"==e.dayType&&o(),e.birthday&&0!=e.birthday.length&&"null"!=e.birthday||(e.birthday="1990-01-01");var r=e.birthday.split("-");e.year=parseInt(r[0]),"3"==e.dayType?(e.dayType="1",e.month=parseInt(r[1])+12):e.month=parseInt(r[1]),e.day=parseInt(r[2]),$("<option/>").val(-1).text("请选择").appendTo(e.$dayType),$("<option/>").val(0).text("公历").appendTo(e.$dayType),$("<option/>").val(1).text("农历").appendTo(e.$dayType),e.$year.get(0).length=0;for(var l=1900;2100>=l;l++)$("<option/>").val(l).text(l+"年").appendTo(e.$year);e.$dayType.on("change",function(){var a=e.$dayType.val(),r=parseInt(e.$year.val()),y=parseInt(e.$month.val()),p=parseInt(e.$day.val()),l={};if("-1"!=a){if("1"==a){var d=calendar.solar2lunar(r,y,p);l=new n(d.lYear,d.isLeap?d.lMonth+12:d.lMonth,d.lDay)}else if(e.$year.is(":hidden"))l=new n(r,y,p);else{var h=y>12,i=calendar.lunar2solar(r,h?y-12:y,p,h);l=new n(i.cYear,i.cMonth,i.cDay)}t()}else o(),l=new n(1990,1,1);e.$year.append($("<option/>").val(l.year)).trigger("change").val(l.year).get(0).length-=1,e.$month.append($("<option/>").val(l.month)).trigger("change").val(l.month).get(0).length-=1,e.$day.val(l.day)}),e.$year.on("change",function(){var a="0";"-1"!=e.$dayType&&(a=e.$dayType.val()),y(a,parseInt(e.$year.val()))}),e.$month.on("change",function(){var a="0";"-1"!=e.$dayType.val()&&(a=e.$dayType.val());var n=parseInt(e.$month.val());n>12&&(n-=12),p(a,parseInt(e.$year.val()),n)}),e.$dayType.val(e.dayType),e.$year.append($("<option/>").val(e.year)).val(e.year).trigger("change").get(0).length-=1,e.$month.append($("<option/>").val(e.month)).val(e.month).trigger("change").get(0).length-=1,e.$day.val(e.day)},y=function(a,n){e.$month.get(0).length=0;var t=calendar.leapMonth(n);if("0"==a||"1"==a&&0==t)for(var o=1;12>=o;o++)$("<option/>").val(o).text("0"==a?o+"月":calendar.toChinaMonth(o)).appendTo(e.$month);else for(var o=1;12>=o;o++)t+1==o&&$("<option/>").val(t+12).text("闰"+calendar.toChinaMonth(t)).appendTo(e.$month),$("<option/>").val(o).text(calendar.toChinaMonth(o)).appendTo(e.$month)},p=function(a,n,t){if(e.$day.get(0).length=0,"0"==a)for(var o=1;o<=calendar.solarDays(n,t);o++)$("<option/>").val(o).text(o+"日").appendTo(e.$day);else if("1"==a)for(var r=calendar.leapMonth(n)==t?calendar.leapDays(n):calendar.monthDays(n,t),o=1;r>=o;o++)$("<option/>").val(o).text(calendar.toChinaDay(o)).appendTo(e.$day)};r(a)};